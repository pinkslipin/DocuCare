{% extends 'user_base.html' %}

{% block title %}Update Patient{% endblock %}

{% block content %}
<div class="main-content">
    <h1>Update Patient: {{ patient.username }}</h1>
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="{{ form.full_name.id_for_label }}">Full Name:</label>
            <div class="input-field">
                {{ form.full_name }}
            </div>
            {% if form.full_name.errors %}
                <div class="alert alert-danger">{{ form.full_name.errors }}</div>
            {% endif %}

            <label for="{{ form.date_of_birth.id_for_label }}">Date of Birth:</label>
            <div class="input-field">
                {{ form.date_of_birth }}
            </div>
            {% if form.date_of_birth.errors %}
                <div class="alert alert-danger">{{ form.date_of_birth.errors }}</div>
            {% endif %}

            <label for="{{ form.address.id_for_label }}">Address:</label>
            <div class="input-field">
                {{ form.address }}
            </div>
            {% if form.address.errors %}
                <div class="alert alert-danger">{{ form.address.errors }}</div>
            {% endif %}

            <label for="{{ form.contact_number.id_for_label }}">Contact Number:</label>
            <div class="input-field">
                {{ form.contact_number }}
            </div>
            {% if form.contact_number.errors %}
                <div class="alert alert-danger">{{ form.contact_number.errors }}</div>
            {% endif %}

            <label for="{{ form.medical_history.id_for_label }}">Medical History:</label>
            <div class="input-field">
                {{ form.medical_history }}
            </div>
            {% if form.medical_history.errors %}
                <div class="alert alert-danger">{{ form.medical_history.errors }}</div>
            {% endif %}

            <label for="{{ form.blood_type.id_for_label }}">Blood Type:</label>
            <div class="input-field">
                {{ form.blood_type }}
            </div>
            {% if form.blood_type.errors %}
                <div class="alert alert-danger">{{ form.blood_type.errors }}</div>
            {% endif %}

            <label for="{{ form.height.id_for_label }}">Height:</label>
            <div class="input-field">
                {{ form.height }}
            </div>
            {% if form.height.errors %}
                <div class="alert alert-danger">{{ form.height.errors }}</div>
            {% endif %}

            <label for="{{ form.weight.id_for_label }}">Weight:</label>
            <div class="input-field">
                {{ form.weight }}
            </div>
            {% if form.weight.errors %}
                <div class="alert alert-danger">{{ form.weight.errors }}</div>
            {% endif %}

            <label for="{{ form.allergies.id_for_label }}">Allergies:</label>
            <div class="input-field">
                {{ form.allergies }}
            </div>
            {% if form.allergies.errors %}
                <div class="alert alert-danger">{{ form.allergies.errors }}</div>
            {% endif %}

            <label for="{{ form.sex.id_for_label }}">Sex:</label>
            <div class="input-field">
                {{ form.sex }}
            </div>
            {% if form.sex.errors %}
                <div class="alert alert-danger">{{ form.sex.errors }}</div>
            {% endif %}

            <label for="{{ form.age.id_for_label }}">Age:</label>
            <div class="input-field">
                {{ form.age }}
            </div>
            {% if form.age.errors %}
                <div class="alert alert-danger">{{ form.age.errors }}</div>
            {% endif %}

            <label for="{{ form.occupation.id_for_label }}">Occupation:</label>
            <div class="input-field">
                {{ form.occupation }}
            </div>
            {% if form.occupation.errors %}
                <div class="alert alert-danger">{{ form.occupation.errors }}</div>
            {% endif %}

            <label for="{{ form.marital_status.id_for_label }}">Marital Status:</label>
            <div class="input-field">
                {{ form.marital_status }}
            </div>
            {% if form.marital_status.errors %}
                <div class="alert alert-danger">{{ form.marital_status.errors }}</div>
            {% endif %}

            <label for="{{ form.emergency_contact.id_for_label }}">Emergency Contact:</label>
            <div class="input-field">
                {{ form.emergency_contact }}
            </div>
            {% if form.emergency_contact.errors %}
                <div class="alert alert-danger">{{ form.emergency_contact.errors }}</div>
            {% endif %}
        </div>
        <div class="button-group">
            <button type="submit" class="btn-primary">Save Changes</button>
            {% if user.is_staff %}
                <a class="btn-secondary" href="{% url 'cancel_update_patient' patient.user.id %}">Cancel</a> <!-- Admin Cancel -->
            {% else %}
                <a class="btn-secondary" href="{% url 'cancel_update_patient' patient.user.id %}">Cancel</a> <!-- Patient Cancel -->
            {% endif %}
        </div>
    </form>
    {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
    {% endif %}
</div>
{% endblock %}